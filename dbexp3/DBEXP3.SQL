-- A202105961404.CLASS definition

CREATE TABLE "CLASS" 
   (	"CLASS_NAME" VARCHAR2(20), 
	"MAJOR_NAME" VARCHAR2(10), 
	"STUDENTS" NUMBER(2,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;


-- A202105961404.DEPARTMENT definition

CREATE TABLE "DEPARTMENT" 
   (	"DEPT_NAME" VARCHAR2(20), 
	"BUILDING" VARCHAR2(15), 
	"BUDGET" NUMBER(12,2), 
	 CHECK (budget > 0) ENABLE, 
	 PRIMARY KEY ("DEPT_NAME")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS"  ENABLE
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE "USERS" ;

CREATE UNIQUE INDEX "SYS_C0084171" ON "DEPARTMENT" ("DEPT_NAME") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS" ;


-- A202105961404.MAJOR definition

CREATE TABLE "MAJOR" 
   (	"MAJOR_NAME" VARCHAR2(10), 
	"DEPT_NAME" VARCHAR2(10), 
	"COMPULSORY" NUMBER(3,0), 
	"ELECTIVE" NUMBER(3,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;


-- A202105961404.STUDENT definition

CREATE TABLE "STUDENT" 
   (	"ID" VARCHAR2(10), 
	"NAME" VARCHAR2(20) NOT NULL ENABLE, 
	"STU_CLASS" VARCHAR2(10), 
	"STU_STATE_DATE" NUMBER(4,0), 
	"STU_STATE" NUMBER(*,0) DEFAULT 0, 
	 PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS"  ENABLE, 
	 CHECK (stu_state in (0,1,2,3)) ENABLE
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE "USERS" ;

CREATE UNIQUE INDEX "SYS_C0084189" ON "STUDENT" ("ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS" ;


-- A202105961404.COURSE definition

CREATE TABLE "COURSE" 
   (	"COURSE_ID" VARCHAR2(5), 
	"TITLE" VARCHAR2(50), 
	"DEPT_NAME" VARCHAR2(20), 
	"CREDITS" NUMBER(2,0), 
	"TERM" CHAR(1), 
	 CHECK (credits > 0) ENABLE, 
	 PRIMARY KEY ("COURSE_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS"  ENABLE, 
	 CHECK (term in(0,1,2,3,4,5,6,7,8)) ENABLE
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE "USERS" ;

ALTER TABLE "COURSE" ADD FOREIGN KEY ("DEPT_NAME")
	  REFERENCES "DEPARTMENT" ("DEPT_NAME") ON DELETE SET NULL ENABLE;

CREATE UNIQUE INDEX "SYS_C0084173" ON "COURSE" ("COURSE_ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS" ;


-- A202105961404.INSTRUCTOR definition

CREATE TABLE "INSTRUCTOR" 
   (	"ID" VARCHAR2(7), 
	"NAME" VARCHAR2(20) NOT NULL ENABLE, 
	"DEPT_NAME" VARCHAR2(20), 
	"SALARY" NUMBER(8,2), 
	 CHECK (salary > 29000) ENABLE, 
	 PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS"  ENABLE
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE "USERS" ;

ALTER TABLE "INSTRUCTOR" ADD FOREIGN KEY ("DEPT_NAME")
	  REFERENCES "DEPARTMENT" ("DEPT_NAME") ON DELETE SET NULL ENABLE;

CREATE UNIQUE INDEX "SYS_C0084177" ON "INSTRUCTOR" ("ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS" ;


-- A202105961404."SECTION" definition

CREATE TABLE "SECTION" 
   (	"COURSE_ID" VARCHAR2(5), 
	"SEC_ID" VARCHAR2(8), 
	"SEMESTER" VARCHAR2(6), 
	"YEAR" NUMBER(4,0), 
	"BUILDING" VARCHAR2(15), 
	"ROOM_NUMBER" VARCHAR2(7), 
	"TIME_SLOT_ID" VARCHAR2(4), 
	"MEMO" VARCHAR2(10), 
	 CHECK (semester in ('Fall', 'Winter', 'Spring', 'Summer')) ENABLE, 
	 CHECK (year > 2001 and year < 2050) ENABLE, 
	 PRIMARY KEY ("COURSE_ID", "SEC_ID", "SEMESTER", "YEAR")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS"  ENABLE
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE "USERS" ;

CREATE UNIQUE INDEX "SYS_C0084181" ON "SECTION" ("COURSE_ID", "SEC_ID", "SEMESTER", "YEAR") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS" ;


-- A202105961404.TAKES definition

CREATE TABLE "TAKES" 
   (	"ID" VARCHAR2(10), 
	"COURSE_ID" VARCHAR2(5), 
	"SEC_ID" VARCHAR2(8), 
	"SEMESTER" VARCHAR2(6), 
	"YEAR" NUMBER(4,0), 
	"GRADE" VARCHAR2(2), 
	 PRIMARY KEY ("ID", "COURSE_ID", "SEC_ID", "SEMESTER", "YEAR")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS"  ENABLE
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE "USERS" ;

CREATE UNIQUE INDEX "SYS_C0084191" ON "TAKES" ("ID", "COURSE_ID", "SEC_ID", "SEMESTER", "YEAR") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS" ;


-- A202105961404.TEACHES definition

CREATE TABLE "TEACHES" 
   (	"ID" VARCHAR2(7), 
	"COURSE_ID" VARCHAR2(5), 
	"SEC_ID" VARCHAR2(8), 
	"SEMESTER" VARCHAR2(6), 
	"YEAR" NUMBER(4,0), 
	 PRIMARY KEY ("ID", "COURSE_ID", "SEC_ID", "SEMESTER", "YEAR")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS"  ENABLE
   ) SEGMENT CREATION DEFERRED 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  TABLESPACE "USERS" ;

CREATE UNIQUE INDEX "SYS_C0084184" ON "TEACHES" ("ID", "COURSE_ID", "SEC_ID", "SEMESTER", "YEAR") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  TABLESPACE "USERS" ;


-- A202105961404."SECTION" foreign keys

ALTER TABLE "SECTION" ADD FOREIGN KEY ("COURSE_ID")
	  REFERENCES "COURSE" ("COURSE_ID") ON DELETE CASCADE ENABLE;
  ALTER TABLE "SECTION" ADD FOREIGN KEY ("BUILDING", "ROOM_NUMBER")
	  REFERENCES "CLASSROOM" ("BUILDING", "ROOM_NUMBER") ON DELETE SET NULL ENABLE;


-- A202105961404.TAKES foreign keys

ALTER TABLE "TAKES" ADD FOREIGN KEY ("COURSE_ID", "SEC_ID", "SEMESTER", "YEAR")
	  REFERENCES "SECTION" ("COURSE_ID", "SEC_ID", "SEMESTER", "YEAR") ON DELETE CASCADE ENABLE;
  ALTER TABLE "TAKES" ADD FOREIGN KEY ("ID")
	  REFERENCES "STUDENT" ("ID") ON DELETE CASCADE ENABLE;


-- A202105961404.TEACHES foreign keys

ALTER TABLE "TEACHES" ADD FOREIGN KEY ("COURSE_ID", "SEC_ID", "SEMESTER", "YEAR")
	  REFERENCES "SECTION" ("COURSE_ID", "SEC_ID", "SEMESTER", "YEAR") ON DELETE CASCADE ENABLE;
  ALTER TABLE "TEACHES" ADD FOREIGN KEY ("ID")
	  REFERENCES "INSTRUCTOR" ("ID") ON DELETE CASCADE ENABLE;